#!/bin/sh

/usr/bin/install -d -m 700 -o root -g root /root/.ssh
/bin/cat << EOF > /root/.ssh/authorized_keys
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAxgPiIpPIrimguQy1wHuALvZXWymsuVsOwys8Ap0mXieKwdG/xkSzJYurAF+Eix14sKNzCGU4CrJMV/N1CHuokNC4Vjexz/DbeZVRBvtUd2HRO7Jp1C7JQW5JIdFSHDZT+Pq0L5CCRrdPdmIiLsz1Grz9MlYXRaKHwaLY6KMyWreuaV7AGn4rqU2dz/talQVBAEDgs46VsxryrkNfIcN/5534xFAaIuMOzPlQq84ZQSM4KZB7oXfLRnd1EIoeArlVh8Y2yUrR+vY4Grkw+ZxDIX7qpPc31NNw1WGNEM4ku+c2z+aJEVeD5UsymenOfM9LIArGM8CVd55p01gCkBmdcQ== hans.van.kranenburg@mendix.nl
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5YfETN/azB5MbYDuMjBP2q2Sjn8r2f0jgnGh/k/9ylIqja3gcw2S2aHgmIBFACDZK5oCFFK3qWmKSiTiuStrOSN5IFoxm6kRwn7lBMpRly0FrKhvGdxR3wMjyYH4AgpKhDJwPh80EcjQX7852ZLpH3MVuMB0XeAe9yl9Wzo0w5LaG3+cWVxpf3jlLFTJoUK2DK0p63QkBaq5J0uv75PwClBwFuIGn4Fq12es0VVyGIAZqGZGQmuv2MdvPjMTgy7ExwpSEg2Xs/7LqLfskd5dmiDgatCLWPktzk0GNlDl7gJ7vnlV5f1HYaYZUxhCOCvoxCvrgc4JL9rlh8MdW8njB pim.van.den.berg@mendix.com
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDoDWQIPiSqMjE81ih4zgQCchiohzvG4bsGl+ecW4tNjRU6f0luFONzS/rPrWhXa7TA2pwcforjLdC0L7nv462TdnI+NcaJMf1jr5v9zDs/6UK4WOVl6/PA3zb38zHhRH6nY1l1VWhO1X7JbHldACJVEGOTA5h4lCY4rgi9Nz3uB012DB+/emnlc0AZ/EQqDcGkDMk/5BMHtFSVe+YKP1+68otw5iPv3ImxeuNj0oDQCFyfWVnUmGFmcrtZPv4v9DxmydjaB0etrK0ErYj51BTNETVOsADScwZ8PoCsfsL3hbYGR8ge5rKTMihc5SibEIjjUwxUswWSdVmh6Zrbwv8j xiwen.cheng@mendix.com
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDB25c7YfC8MyVhP3/mjVXLSlWJSfmlFXEZXPiKwGCvIOgREe99BO6Qv5qkiPYM1rwEwM3ycXfRdSHXaSCzNFh8DG8dD2+TT6hUnTU8FqAQBeoiV8GUy9Zmkh0XXJ5rs97fjeZz9aIuHOc5ktKOjR+PEsHEcjUWhoqVrZOwfrXKOxv8wYnF15V6b/fWnVA5CtCzEPnvn7bTaMaSKaBZQAe1EqWlKvvR5vpmxoII9SlkSODh/mg5LKL1g2iZy4cmMMDALkAPw1dqhqeJMNirva2uIPSDl8Wd1nQiVU5cILqsbGf4w+jvRxFmsNd++ba386Pj65tdvy1Tw1iVbywPMxEd daniel.van.dorp@mendix.com
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCqCWimzOf+TPuyNIzuk3xdQAvigYQE7j4rDT+/QQL7T5+h+b8TbQyvolNL8GTJUpgRumN896S4zDGg87wB4NVdMpVNgUKzV88BDeIbkm/Dvv1fpDGmNJErPeBGEM1bjwmkV3DL90hudo4LsDhdiwkuL6m2rzR7nJm5Xp7WvDGgkS/fJ1llljyQ1DQhlPOBlTMOSx5q7WT2bNenYyBGQKGlSlfo/PoLsgV+0H+k/AbXHD/XwEK0gXxvInT0lfp9EcFuiTPEm8+mtC5+CaNjDeft8fCsIT+36LKPjl2ajDtyhGf07xypwvPt+kpmqk8pZ0Y10WXFuXFqgyvm/wPP/7ZF sebastian.carlier@mendix.com
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCuj6DduCZVLkhL3pXavfcAaCpc+/Fj8xbaIRivu2YjCJrKd9DwIZvsldQRWDyBwyyNroEqi0fQfqFCwe1y6nRyUjAywUDskpFJETAWcczO0kbb0pMZJjlmWNZ3Cs+4BwJu4q4s7qK0EEZUacXkfg4mwzKSNGtkCFCG70j8vVyFJwJW3+30ol9Jsyw7JRogwRnBqmucqdlR0aME5Ci/3qB7zFlieHl7BeHBxjZj0RqTR+lma5TiTDObXAEZAG7VYoKOIwEPZXEdsJI9VabMunX7ZsuRyPIK2DFNNNd5xOxuYQCEOFoj40iF4sS7/yvfKQPT7b/t2+yhGphzVStlxQsyk+JVpF8x91p2IhAR1zpyKNEuuZBlRkyerRtq6hsUzatR9uvKNIaVO8mTVSwAHwQudAvulNbSPLXiicjkO3h4LQrrs2QeJfQuORVIeP/owFvn8Fqnfc3z+mqnq5n3Obyab/hjanrNCrVwmkqz/LVL3oMpNhVZ4rXPSnUXuLNVjBj+QluLq+W8p2mnVeKdB/81gxv9j/wo27giB8meJ1lSxuEbwcbWcGjKAaFv8uoGt6AFylh3sF8pryGA+IZs4oZ9Fcz7L3isf6uAPCO+QWYgMbPZUMJeImwFUeaCc/NDOiRtyTgTshZM6X2cBhJoxPjiUGuN77DPVcjN/AeeLKoJAw== jouke.waleson@mendix.com
EOF

if /bin/grep -q ^8 /etc/debian_version
then
    /bin/ln -nsf /dev/null /etc/systemd/system/puppet.service
else
    /bin/echo "exit 1" >> /etc/default/puppet
fi
/usr/bin/test ! -f /var/lib/puppet/state/agent_disabled.lock || /bin/rm /var/lib/puppet/state/agent_disabled.lock
